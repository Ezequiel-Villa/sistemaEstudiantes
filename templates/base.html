<!DOCTYPE html>
<html lang="es">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Sistema de Estudiantes{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    {% block extra_head %}{% endblock %}
</head>
<body class="app-body">
    <svg aria-hidden="true" class="icon-sprite">
        <symbol id="icon-gauge" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 14h.01" />
            <path d="M12 14l4-4" />
            <path d="M3.34 19a10 10 0 1 1 17.32 0" />
        </symbol>
        <symbol id="icon-users" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
            <circle cx="9" cy="7" r="4" />
            <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
            <path d="M16 3.13a4 4 0 0 1 0 7.75" />
        </symbol>
        <symbol id="icon-building" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18" />
            <path d="M6 18h12" />
            <path d="M10 6h4" />
            <path d="M10 10h4" />
            <path d="M10 14h4" />
        </symbol>
        <symbol id="icon-arrow-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 19l-7-7 7-7" />
            <path d="M19 12H5" />
        </symbol>
        <symbol id="icon-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="7" />
            <path d="m21 21-4.35-4.35" />
        </symbol>
        <symbol id="icon-user-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
            <circle cx="9" cy="7" r="4" />
            <line x1="19" y1="8" x2="19" y2="14" />
            <line x1="22" y1="11" x2="16" y2="11" />
        </symbol>
        <symbol id="icon-table" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
            <path d="M3 9h18" />
            <path d="M9 21V9" />
        </symbol>
        <symbol id="icon-check-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m9 12 2 2 4-4" />
            <circle cx="12" cy="12" r="10" />
        </symbol>
        <symbol id="icon-alert-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="8" x2="12" y2="12" />
            <line x1="12" y1="16" x2="12.01" y2="16" />
        </symbol>
        <symbol id="icon-minus-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <path d="M8 12h8" />
        </symbol>
        <symbol id="icon-graduation" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 10 12 4 2 10l10 6 10-6Z" />
            <path d="M6 12v5c0 .9 2.7 2 6 2s6-1.1 6-2v-5" />
            <path d="M12 22v-4" />
        </symbol>
        <symbol id="icon-hierarchy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="6" height="6" x="9" y="3" rx="1" />
            <rect width="6" height="6" x="3" y="15" rx="1" />
            <rect width="6" height="6" x="15" y="15" rx="1" />
            <path d="M12 9v6" />
            <path d="M12 15H9" />
            <path d="M12 15h3" />
        </symbol>
        <symbol id="icon-eye" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" />
            <circle cx="12" cy="12" r="3" />
        </symbol>
        <symbol id="icon-pencil" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 20h9" />
            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4Z" />
        </symbol>
        <symbol id="icon-trash" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 6h18" />
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
            <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
            <line x1="10" y1="11" x2="10" y2="17" />
            <line x1="14" y1="11" x2="14" y2="17" />
        </symbol>
        <symbol id="icon-filter" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16" />
            <path d="M6 12h12" />
            <path d="M10 20h4" />
        </symbol>
        <symbol id="icon-save" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2Z" />
            <path d="M17 21v-8H7v8" />
            <path d="M7 3v5h8" />
        </symbol>
        <symbol id="icon-download" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="7 10 12 15 17 10" />
            <line x1="12" y1="15" x2="12" y2="3" />
        </symbol>
    </svg>
    <div class="app-shell">
        <header class="app-header">
            <div class="topbar">
                <div class="topbar-inner app-container">
                    <a class="brand" href="{% url 'students:dashboard' %}">
                        <span class="brand-icon"><svg class="icon" aria-hidden="true"><use href="#icon-graduation"></use></svg></span>
                        <div class="brand-text">
                            <span class="brand-title">Sistema de Registro</span>
                            <small class="brand-subtitle">Estudiantes</small>
                        </div>
                    </a>
                    <button class="nav-toggle" aria-label="Abrir menú" aria-expanded="false" aria-controls="main-nav">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <nav id="main-nav" class="main-nav">
                        {% with current=request.resolver_match.url_name student_urls='student_list student_create student_update student_detail student_delete' %}
                        <a class="nav-link {% if current == 'dashboard' %}is-active{% endif %}" href="{% url 'students:dashboard' %}"><svg class="icon" aria-hidden="true"><use href="#icon-gauge"></use></svg><span>Inicio</span></a>
                        <a class="nav-link {% if current in student_urls %}is-active{% endif %}" href="{% url 'students:student_list' %}"><svg class="icon" aria-hidden="true"><use href="#icon-users"></use></svg><span>Estudiantes</span></a>
                        <a class="nav-link {% if current == 'universities' %}is-active{% endif %}" href="{% url 'students:universities' %}"><svg class="icon" aria-hidden="true"><use href="#icon-building"></use></svg><span>API Externa</span></a>
                        {% endwith %}
                    </nav>
                </div>
            </div>
        </header>

        <main class="app-main">
            <div class="app-container">
                {% if messages %}
                    <div class="alerts-stack">
                        {% for message in messages %}
                            <div class="app-alert app-alert-{{ message.tags }}">
                                <span class="alert-icon" aria-hidden="true"></span>
                                <div class="alert-body">{{ message }}</div>
                                <button class="alert-close" type="button" aria-label="Cerrar">×</button>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
                {% block content %}{% endblock %}
            </div>
        </main>

        <footer class="app-footer">
            <div class="footer-inner app-container">
                <span class="muted">Sistema de Registro de Estudiantes</span>
                <small class="muted">&copy; 2025 Equipo Docente</small>
            </div>
        </footer>
    </div>
    <script>
        (() => {
            const toggle = document.querySelector('.nav-toggle');
            const nav = document.getElementById('main-nav');
            if (toggle && nav) {
                toggle.addEventListener('click', () => {
                    const isOpen = nav.classList.toggle('is-open');
                    toggle.setAttribute('aria-expanded', isOpen.toString());
                });
            }

            document.querySelectorAll('.alert-close').forEach((btn) => {
                btn.addEventListener('click', () => btn.parentElement?.remove());
            });
        })();
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
